<!doctype html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>Qwik training</title>

    <link rel="stylesheet" href="../dist/reset.css">
    <link rel="stylesheet" href="../dist/reveal.css">
    <link rel="stylesheet" href="../dist/theme/white.css">
    <link rel="stylesheet" href="./slides.css">

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="../plugin/highlight/monokai.css">

    <link rel='stylesheet' id='font-family-1-css'
          href='https://fonts.googleapis.com/css2?family=Poppins%3Awght%40300%3B400%3B600%3B700&#038;display=swap&#038;ver=005bbd'
          type='text/css' media='all'/>
    <link rel="icon" type="image/png" href="./images/qwik-logo.svg">
</head>
<body class="global">

<div class="reveal">
    <div class="slides">
        <section data-state="se-connaitre">
            <h1>Qwik</h1>
            <aside class="notes">
                <ul>
                    <li>Pr√©sentation formateur</li>
                    <li>Un tour de table</li>
                    <li>Votre niveau en HTML / JS / CSS ?</li>
                    <li>Framework web JS</li>
                    <li>Chargement "instantan√©" quelle que soit la taille/complexit√© de l'application</li>
                    <li>N√©cessite uniquement 1Ko de JS pour commencer √† fonctionner</li>
                    <li>JSX</li>
                </ul>
            </aside>
        </section>

        <section data-state="base">
            <section>
                <h2>Qwik niveau 1</h2>
            </section>
            <section data-state="pr-robot">
                <p>Pr√©-requis minimums</p>
                <ul>
                    <li>Node.js 18+</li>
                    <li>NPM v10.7.0+</li>
                    <li>Git</li>
                </ul>
            </section>
            <section>
                <p>Cr√©ation de l'application power ranger</p>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li>Cr√©ation d'une application qwik "power-rangers-app"</li>
                    <li>`npm create qwik@latest`</li>
                    <li>Nom : power-rangers-app</li>
                    <li>Starte : Empty App (Qwik City + Qwik)</li>
                    <li>Installation des dependences : oui</li>
                    <li>Initialisation du git : non</li>
                    <li>cd power-rangers-app</li>
                    <li>npm run start</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>Correction : 01-Premi√®re-application</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Structure du projet</p>
                <div w3-include-html="./code/01-structure.html"></div>
                <aside class="notes">
                    <ul>
                        <li>README.md
                        <li>package.json
                        <li>public -> Contient des fichiers statiques qui seront copi√©s dans le dossier dist</li>
                        <li>src -> Contient le code de l'application</li>
                        <li>components -> Les composants qwik</li>
                        <li>entry.ssr.tsx -> Point d'entr√©e pour le serveur afin de g√©n√©rer le HTML initial de
                            l'application avant de l'envoyer au client
                        </li>
                        <li>global.css -> Fichier CSS global</li>
                        <li>root.tsx -> Premier composant qui sera rendu</li>
                        <li>routes -> L'annuaire des routes de l'application</li>
                        <li>index.tsx -> Page d'accueil</li>
                        <li>layout.tsx -> La mise en page racine</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Composant et √©v√®nements</p>
                <div w3-include-html="./code/01-component.html"></div>
                <aside class="notes">
                    <ul>
                        <li>Montrer comment un composant qwik est form√©</li>
                        <li>Montrer handler</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Nettoyer la page `index.tsx`</li>
                    <li class="fragment">Cr√©er un composant hello-world.tsx dans le dossier components et l'appeler dans
                        ...src/routes/index.tsx
                    </li>
                    <li class="fragment">Passer un `props` pour variabiliser le `world` selon le composant parent (ne
                        pas oublier le typage)
                    </li>
                    <li class="fragment">Ajouter un bouton avec un √©v√®nement onClick$ pour faire un console.log dans une
                        m√©thode $
                    </li>
                    <li class="fragment">üëÄInspecter le navigateurüëÄ</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
            <section>
                <p>Rendu avec des conditions, des listes et du binding</p>
                <ul>
                    <li class="fragment">if/else, ternaire et &&</li>
                    <li class="fragment">map et key</li>
                    <li class="fragment">Binding attribute</li>
                </ul>

            </section>
            <section>
                <div w3-include-html="./code/01-conditions.html"></div>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Importer SAGA_POWER_RANGERS</li>
                    <li class="fragment">Cr√©er un composant power-ranger-list.tsx</li>
                    <li class="fragment">Faire apparaitre le nom des power rangers avec une boucle `map`</li>
                    <li class="fragment">Utiliser les balises ul li</li>
                    <li class="fragment">Ajout d'une condition d'affichage selon la couleur d'un power ranger</li>
                    <li class="fragment">Modification du filtre couleur avec un input `bind`</li>
                    <li class="fragment">Petit aide !!!</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>

            <section>
                <p>Signal et Store</p>
                <div w3-include-html="./code/01-signal.html"></div>
                <aside class="notes">
                    <ul>
                        <li>Modifier dynamiquement le template</li>
                        <li>Montrer la diff√©rence</li>
                        <li>option deep permettant de suivre uniquement les propri√©t√©s de niveau sup√©rieur, perf</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Cr√©er un composant dream-team.txs, l'appeler dans power-ranger-list</li>
                    <li class="fragment">Le composant DreamTeam a en props theSelection de type string</li>
                    <li class="fragment">Cr√©er un useSignal theSelection de type string dans PowerRangerList</li>
                    <li class="fragment">Ajouter dans theSelection le nom du power ranger via un bouton, onClick$</li>
                </ul>
            </section>
            <section data-state="tp">
                <p>Suite du TP</p>
                <ul>
                    <li class="fragment">Changer theSelection par une liste de string pour en avoir plusieurs</li>
                    <li class="fragment">Utiliser les balises ul li</li>
                    <li class="fragment">üëÄInspecter le navigateurüëÄ</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
            <section>
                <p>CSS modules et CSS global</p>
                <p class="fragment">Le CSS global est utilis√© pour les styles qui doivent √™tre appliqu√©s sur tout le
                    site</p>
                <p class="fragment">Le CSS module est utilis√© pour les styles qui doivent √™tre appliqu√©s sur un
                    composant</p>
            </section>
            <section>
                <p>Slot</p>
                <div w3-include-html="./code/01-slot.html"></div>
            </section>
            <section>
                <div w3-include-html="./code/01-css.html"></div>
                <aside class="notes">
                    <ul>
                        <li>utilisation des css module</li>
                        <li>Importer du CSS sous forme de cha√Æne dans Vite, vous devez ajouter le ?inline param√®tre de
                            requ√™te √† l'importation
                        </li>
                        <li>scoped</li>
                        <li>inline</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Cr√©ation d'un fichier style.css</li>
                    <li class="fragment">Personnaliser la balise ul avec `list-style-type` et la m√©thode useStyles$ dans
                        PowerRangerList
                    </li>
                    <li class="fragment">Remplacer par useStyles$ par useStylesScoped$</li>
                    <li class="fragment">üëÄInspecter le navigateurüëÄ</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
            <section>
                <p>Et les tests</p>
                <div w3-include-html="./code/01-tests.html"></div>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Installer de l'adapter vitest `npm run qwik add vitest`</li>
                    <li class="fragment">Ecrire un test pour PowerRangerDreamTeam</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
        </section>
        <section data-state="medium">
            <section>
                <h2>Qwik niveau 2</h2>
            </section>
            <section>
                <p>Contextes</p>
                <div w3-include-html="./code/02-context.html"></div>
                <aside class="notes">
                    <ul>
                        <li>D√©claration de l'id</li>
                        <li>ce qu'on peut mettre ou pas</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Supprimer le props theSelection dans DreamTeam</li>
                    <li class="fragment">Modification PowerRangerList pour utiliser un context</li>
                    <li class="fragment">R√©cup√©ration dans DreamTeam</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>

            <section>
                <p>Qwik City - routing</p>
                <div w3-include-html="./code/02-routing.html"></div>
                <aside class="notes">
                    <ul>
                        <li>Se basse sur le dossier routes</li>
                        <li>Layout serra utilis√© pour les routs au m√™me niveau</li>
                        <li>Slot permet de projeter ces enfants dans l'arborescence DOM</li>
                        <li>R√©cup√©ration de donn√©es avec useLocation</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Cr√©ation d'une page `Mon power ranger`</li>
                    <li class="fragment">Acc√©der directement via l'url</li>
                </ul>
            </section>
            <section>
                <p>Pour r√©cup√©ration de la donn√©e pass√© dans l'url</p>
                <div w3-include-html="./code/02-location.html"></div>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Cr√©ation d'une page dynamique `detail` avec l'id d'une saga</li>
                    <li class="fragment">R√©cup√©rer la donn√©e avec SAGA_POWER_RANGERS</li>
                    <li class="fragment">Acc√©der directement via l'url</li>
                </ul>
            </section>
            <section>
                <p>Qwik City - Navigation SPA/MPA</p>
                <div w3-include-html="./code/02-link.html"></div>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Utilisation du composant `Link` pour aller sur la page `detail/[id]`</li>
                    <li class="fragment">üëÄInspecter le navigateurüëÄ</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
            <section>
                <p>Navigation MPA ou SPA üßê</p>
            </section>
            <section data-state="tp">
                <p>√âv√®nement de navigation bizarre</p>
                <p>Live coding</p>
                <aside class="notes">
                    export default component$(() => {
                    const go = $((event)=>{
                    event.preventDefault();
                    alert('tu ne pars pas')
                    })
                    return &lt;a href="http://google.com" preventdefault:click onClick$={go}&gt;Go to&lt;/a&gt;
                    }
                    )
                </aside>
            </section>
            <section>
                <p>Qwik City - DocumentHead</p>
                <div w3-include-html="./code/02-head.html"></div>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Variabiliser le `title` selon le nom dans page d√©tails d'un power rangers</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
            <section>
                <p>Qwik City - routeLoaders$</p>
                <div w3-include-html="./code/02-route-loader.html"></div>
                <aside class="notes">
                    <ul>
                        <li>R√©cup√©ration de donn√©e pour le composant ...</li>
                        <li>Ce code ne s'ex√©cute que sur le serveur, apr√®s chaque navigation</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">D√©marage du backend `node server.mjs`
                    </li>
                    <li class="fragment">Modifier le code pour r√©cup√©ration les donn√©es avec routeLoader$ sur
                        http://localhost:8080/
                    </li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
            <section>
                <p>Qwik City - useResource$</p>
                <div w3-include-html="./code/02-use-resource.html"></div>
            </section>
            <section>
                <p>Qwik City - Resources</p>
                <div w3-include-html="./code/02-resource.html"></div>
                <aside class="notes">
                    <aside class="notes">
                        <ul>
                            <li> Il est souvent souhaitable de commencer √† r√©cup√©rer les donn√©es sur le serveur dans le
                                cadre de la requ√™te HTTP initiale avant le rendu du composant
                            </li>
                            <li>Il s'agit plut√¥t d'une API de bas niveau qui est utile lorsque vous souhaitez r√©cup√©rer
                                des donn√©es dans le navigateur
                            </li>
                        </ul>
                    </aside>
                </aside>
            </section>
            <section>
                <p>TP</p>
                <ul>
                    <li class="fragment">Utilisation du composant Ressource avec le backend</li>
                    <li class="fragment">Live coding</li>
                </ul>
            </section>
            <section>
                <p>Qwik City - formulaire avec Modular Form</p>
                <div w3-include-html="./code/02-forms.html"></div>
            </section>
            <section>
                <p>TP</p>
                <ul>
                    <li class="fragment">Non, je blague</li>
                </ul>
            </section>
        </section>

        <section data-state="why-qwik-so-cool">
            <section>
                <h2>Les atouts de Qwik</h2>
                <p class="fragment">Pourquoi est-il aussi m√©... euh cool</p>
            </section>

            <section>
                <h2>Performance Web</h2>
                <p class="fragment">... et empreinte carbone</p>
            </section>
            <section>
                <img src="./images/fcp.png" style="max-height: 400px">
                <aside class="notes">
                    <p>FP: First Painting (On commence √† "sentir" de site web arriver)</p>
                    <p>FMP: First MeaningFul Painting (On peut commencer √† lire, vue g√©n√©rale)</p>
                    <p>TTI: Time to Interactive(On peut interagir, Si l'utilisateur est rest√© jusque-l√† c'est gagn√©)</p>
                </aside>
            </section>
            <section>
                <img src="./images/fcp-why.png" style="height: 600px">
                <aside class="notes">
                    <div>TEMPO: 4:40</div>
                    <div>Correspond √† des √©v√®nements techniques</div>
                    <div>FP: chargement de la page html uniquement</div>
                    <div>FMP: page html + rendu JS si besoin</div>
                    <div>TTI: page html + rendu JS + √©couteurs d√©v√®nements</div>
                </aside>
            </section>

            <section>
                <h2>Les types de rendu web</h2>
                <aside class="notes">
                    <div>TEMPO: 6:00</div>
                    <div>Partant de ces d√©finitions, on a utilis√© dans le temps plusieurs fa√ßons de faire pour essayer
                        d'am√©liorer l'UX utilisateur
                    </div>
                </aside>
            </section>
            <section>
                <table class="legacy">
                    <tbody>
                    <tr>
                        <td>
                            <p>Statique</p>
                        </td>
                        <td>
                            <img src="./images/app1.png" class="app-size">
                        </td>
                        <td class="rating">
                            <div class="center-image">
                                <p>Interactivit√©</p>
                                <img src="./images/star.png" class="rate ml-auto">
                            </div>
                            <div class="center-image">
                                <p>FMP</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>TTI</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                        </td>
                    </tr>
                    <tr class="fragment">
                        <td>
                            <p>G√©n√©r√©</p>
                        </td>
                        <td>
                            <img src="./images/app2.png" class="app-size">
                        </td>
                        <td class="rating">
                            <div class="center-image">
                                <p>Interactivit√©</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>FMP</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>TTI</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                        </td>
                    </tr>
                    <tr class="fragment">
                        <td>
                            <p>CSR</p>
                        </td>
                        <td>
                            <img src="./images/app3.png" class="app-size">
                        </td>
                        <td class="rating">
                            <div class="center-image">
                                <p>Interactivit√©</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>FMP</p>
                                <img src="./images/star.png" class="rate ml-auto">
                            </div>
                            <div class="center-image">
                                <p>TTI</p>
                                <img src="./images/star.png" class="rate ml-auto">
                            </div>
                        </td>
                    </tr>
                    <tr class="fragment">
                        <td>
                            <p>SSR / (Partial) Hydratation</p>
                        </td>
                        <td>
                            <img src="./images/app4.png" class="app-size">
                        </td>
                        <td class="rating">
                            <div class="center-image">
                                <p>Interactivit√©</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>FMP</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>TTI</p>
                                <img src="./images/star.png" class="rate ml-auto">
                            </div>
                        </td>
                    </tr>
                    <tr class="fragment">
                        <td>
                            <p>SSR (Resumability) (<img src="./images/qwik.png" class="qwik-logo small">)</p>
                        </td>
                        <td>
                            <img src="./images/app5.png" class="app-size">
                        </td>
                        <td class="rating">
                            <div class="center-image">
                                <p>Interactivit√©</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>FMP</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                            <div class="center-image">
                                <p>TTI</p>
                                <img src="./images/star.png" class="rate ml-auto">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                                <img src="./images/star.png" class="rate">
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>
                <aside class="notes">
                    <h3>Statique</h3>
                    <p>Tr√®s performant, et responsable</p>
                    <p>Pas ou peu d'interactions</p>
                    <h3>G√©n√©r√©</h3>
                    <p>Moins bien niveau perf (il faut g√©n√©rer la page avant de la servir)</p>
                    <p>Plus d'interactions</p>
                    <h3>CSR</h3>
                    <p>Interactions bien sup√©rieures</p>
                    <p>Performances "s'√©croulent" FMP et TTI</p>
                    <h3>SSR avec hydratation</h3>
                    <p>Donn√©es envoy√©es 2 fois (HTML ET JS) et calcul√©es 2 fois</p>
                    <p>TTI tr√®s long (reconstruction de l'ensemble de la page avant interaction m√™me si d√©j√†
                        constuite)</p>
                    <h3>R√©sumabilit√©</h3>
                    <p>Grosse am√©lioration TTI</p>
                    <p>Optimisations de ce qui est possible en plus</p>
                    <div>Do better by doing (almost) nothing !</div>
                    <div>Qwik ne demande pas d'effort au d√©veloppeur !</div>
                </aside>
            </section>

            <section data-state="green">
                <h2>Empreinte et performace</h2>
                <p class="fragment fade-in">1 Mo envoy√© = 15 g de CO2 (et c'est d√©j√† un d√©but)</p>
                <p class="fragment fade-in">Attention (activit√© backend, optimisations: caches, g√©n√©ration statique,
                    ...)</p>
                <aside class="notes">
                    <p>On a parl√© jusque-l√† de performances, mais quel rapport avec l'empreinte carbone ?</p>
                    <p>Plus de code = plus de transit = plus de consommation</p>
                    <p>Multipli√© par le nombre de visites ou d'utilisateurs</p>
                </aside>
            </section>

            <section data-state="robot">
                <h2>R√©sumabilit√©</h2>
                <p class="fragment">Relancer la navigation en ex√©cutant le minimum de choses</p>
                <p class="fragment fade-in">T√©l√©charger le moins de choses possible</p>
                <p class="fragment fade-in">... tout en gardant une r√©activit√© accrue</p>
            </section>
            <section data-state="robot">
                <h2>QwikLoader</h2>
                <p class="fragment">1kB de Javascript</p>
                <p class="fragment fade-in">uniquement des handlers g√©n√©raux</p>
                <p class="fragment fade-in">... uniquement ceux n√©cessaires</p>
            </section>
            <section data-state="robot">
                <p>Comment √ßa marche ?</p>
                <img src="./images/onevent.png" style="height: 250px;">
                <aside class="notes">
                    <div>Qwik ne va t√©l√©charger le JS qu'au moment o√π il en a besoin !</div>
                </aside>
            </section>
            <section data-state="robot">
                <img src="./images/lazy.png" style="height: 250px;">
            </section>
            <section data-state="robot">
                <h2>Le n√©cessaire</h2>
                <ul>
                    <li class="fragment">Etat minimis√©</li>
                    <li class="fragment">D√©pendances entre fragments</li>
                    <li class="fragment">R√©f√©rences aux interactions/render</li>
                    <li class="fragment">JS n√©cessaire (useVisibleTask$, ...)</li>
                </ul>
            </section>
            <section data-state="robot">
                <h2>√âtat minimis√©</h2>
                <div w3-include-html="./code/03-state.html"></div>
                <aside class="notes">
                    <p>Type sp√©cifique, compris par Qwik uniquement</p>
                    <p>On devine les r√©f√©rences au code Javascript</p>
                    <p>On devine les d√©pendances entre fragments</p>
                </aside>
            </section>
            <section data-state="robot">
                <p>Lisible avec <a href="https://qwik.dev/docs/labs/devtools/">Qwik Devtools</a></p>
                <pre data-id="code-animation">
                <code data-trim data-line-numbers="1-16|3-5|7" class="code-font-sm">
                        import("https://qwik.dev/devtools/json/");
                </code>
                </pre>
                <img class="fragment" src="./images/devtools.png" style="height: 250px;">
            </section>
            <section>
                <p>Description du r√©sultat</p>
                <ul>
                    <li class="fragment">objs: Les objects du syst√®me qui ont √©t√© s√©rialis√©s</li>
                    <li class="fragment">ctx: Un ensemble d'objets QContext.</li>
                    <li class="fragment">refs: un esemble d'objets QRef.</li>
                    <li class="fragment">sub: un ensemble d'objets QSubscription.</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>QContext: Un √©tat que Qwik a s√©rialis√© pour un composant donn√©. Inclut les props du
                            composant et un ensemble d'objets Task qui pourraient √™tre ex√©cut√©es par le composant.
                        </li>
                        <li>QRef: Si un √©l√©ment a un observateur, alors la QRef rassemble tous les observateurs ainsi
                            que les objets qui ont pu √™tre captur√©s par eux.
                        </li>
                        <li>Qwik ne s√©rialise que les objets atteignables depuis un QContext, ou depuis une QRef.</li>
                    </ul>
                </aside>
            </section>
            <section data-state="robot">
                <p>et dans le html...</p>
                <div w3-include-html="./code/03-state-html.html"></div>
                <aside class="notes">
                    <p>il utilise ses r√©f√©rences et son markup pour le rendu</p>
                    <p>il utilise ses links js avec r√©f√©rences pour les ex√©cutions</p>
                    <ul>
                        <li>Le framework est responsable de ces optimisations</li>
                        <li>Uniquement la partie n√©cessaire de l'application est envoy√©e</li>
                        <li>En particulier, on n'envoie pas un contenu obtenu par API qui ne peut plus changer !</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <h2>TP</h2>
                <ul>
                    <li class="fragment">Regarder le lazy loading sur son appli</li>
                    <li class="fragment">Regarder les js g√©n√©r√©s et comment c'est articul√©</li>
                </ul>
            </section>

            <section>
                <h2>Lazy Lazy loading</h2>
            </section>
            <section>
                <p>Un composant Qwik</p>
                <div w3-include-html="./code/03-component.html"></div>
                <aside class="notes">
                    <div>Exemple tout simple de composant</div>
                </aside>
            </section>
            <section>
                <p>... et sa version "compil√©e"</p>
                <div w3-include-html="./code/03-compiled.html"></div>
                <aside class="notes">
                    <p>S√©paration en fichiers s√©par√©s</p>
                    <p>De l√† viennent des contraintes √† respecter... (imaginons Closures, param√®tres, ...)</p>
                </aside>
            </section>
            <section data-auto-animate>
                <blockquote cite="https://qwik.builder.io/docs/advanced/dollar/">
                    <p>Not all valid JavaScript code is valid code for the Optimizer.</p>
                    <footer class="code-font-sm">‚ÄîQwik documentation, <cite>The $ dollar sign</cite></footer>
                </blockquote>
            </section>
            <section data-auto-animate>
                <blockquote cite="https://qwik.builder.io/docs/advanced/dollar/">
                    <p>Not all valid JavaScript code is valid code for the Optimizer.</p>
                    <footer class="code-font-sm">‚ÄîQwik documentation, <cite>The $ dollar sign</cite></footer>
                </blockquote>
                <div w3-include-html="./code/03-invalid.html"></div>
                <aside class="notes">
                    <p>Invalide car non export√©</p>
                    <p>Valides sinon</p>
                </aside>
            </section>
            <section data-auto-animate>
                <blockquote cite="https://qwik.builder.io/docs/advanced/dollar/">
                    <p>Not all valid JavaScript code is valid code for the Optimizer.</p>
                    <footer class="code-font-sm">‚ÄîQwik documentation, <cite>The $ dollar sign</cite></footer>
                </blockquote>
                <div w3-include-html="./code/03-invalid-2.html"></div>
                <aside class="notes">
                    <div>TEMPO: 23:10</div>
                    <p>Pas de let</p>
                    <p>Pas de classes (s√©rializable)</p>
                </aside>
            </section>

            <section>
                <h2>D√®s le d√©but ?</h2>
                <p class="fragment">useOn, useOnDocument, useOnWindow</p>
                <p class="fragment">useTask$</p>
                <p class="fragment fade-in red">useVisibleTask$</p>
                <div w3-include-html="./code/03-eslint.html"></div>
                <aside class="notes">
                    <p>Des fois on a besoin d'ex√©cuter des choses sans action utilisateur (slideshow, ...)</p>
                    <ul>
                        <li>useOn* permet d'√©couter les √©v√®nements de chaque container directement</li>
                        <li>useTask$: ex√©cution en mode SSR</li>
                        <li>useVisibleTask$: ex√©cution en mode CSR, mais attention, bloque le main thread !</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <h2>TP</h2>
                <ul>
                    <li class="fragment">Ajouter un affichage de la position de la souris sur la page (coordonn√©es X,
                        Y)
                    </li>
                    <li class="fragment">Rendre les Noms des power rangers qui sont trop longs pour qu'ils d√©filent sur
                        place
                    </li>
                    <li class="fragment">Permettre de stopper/reprendre le d√©filement en cliquant sur un bouton</li>
                </ul>
                <aside class="notes">
                    <a href="https://qwik.dev/docs/guides/best-practices/#use-usevisibletask-as-a-last-resort">Avoid
                        Visible tasks</a>
                    <ul>
                        <li class="fragment">utiliser useOnDocument</li>
                        <li class="fragment">utiliser useLocation</li>
                        <li class="fragment">useVisibleTask + un setInterval</li>
                        <li class="fragment">attention s√©rialisation !</li>
                    </ul>
                </aside>
            </section>
        </section>

        <section data-state="qwik-backend">
            <section>
                <h2>Qwik Backend</h2>
                <p>Tout au m√™me endroit</p>
            </section>
            <section>
                <p>routeActions$ / globalActions$</p>
                <ul>
                    <li class="fragment">Fonctions serveur appel√©es explicitement</li>
                    <li class="fragment">Avec side-effect (BDD, email, submit...)</li>
                    <li class="fragment">Retourne de la donn√©e au client</li>
                </ul>
            </section>
            <section>
                <p>Avec un form</p>
                <div w3-include-html="./code/04-form.html"></div>
                <aside class="notes">
                    <ul>
                        <li>npm install @modular-forms/qwik</li>
                        <li>Utilisation de Form (Qwik-City)</li>
                        <li>Fonctionnera m√™me sans JS. Avec JS, la navigation est en mode SPA</li>
                        <li>On peut coupler avec des event handlers type onSubmitCompleted$ pour par exemple reset un
                            formulaire
                        </li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Programmatiquement</p>
                <div w3-include-html="./code/04-form-p.html"></div>
                <aside class="notes">
                    <ul>
                        <li>Pour d√©clencher sur ce qu'on a envie</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Validation de formulaires</p>
                <div w3-include-html="./code/04-form-valid.html"></div>
                <aside class="notes">
                    <ul>
                        <li>Permet de valider ce qu'on a en entr√©e</li>
                        <li>zod est built-in dans Qwik</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Acc√®s √† la request</p>
                <div w3-include-html="./code/04-request.html"></div>
                <aside class="notes">
                    <ul>
                        <li>on a bien l'auth etc...</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Gestion des erreurs</p>
                <div w3-include-html="./code/04-errors.html"></div>
                <aside class="notes">
                    <ul>
                        <li>failed est mis √† true en cas d'erreur</li>
                        <li>fieldErrors contient l'objet ayant provoqu√© l'erreur</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Pr√©c√©dentes valeurs</p>
                <div w3-include-html="./code/04-previous.html"></div>
                <aside class="notes">
                    <ul>
                        <li>formData contient le pr√©c√©dent formulaire</li>
                        <li>par exemple si on veut persister... m√™me sans JS</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Route vs Global ?</p>
                <ul>
                    <li class="fragment">`routeAction$()` uniquement dans le dossier `src/routes`</li>
                    <li class="fragment">Uniquement sur les routes o√π elle est d√©clar√©e</li>
                    <li class="fragment">Doit √™tre export√©e</li>
                    <li class="fragment">`globalAction$()` partout dans le dossier `src`</li>
                </ul>
                <aside class="notes">
                    <ul>
                        <li>on oppose aussi souvent les actions qui ont besoin de l'utilisateur connect√© ou non</li>
                        <li>routeAction$: formulaire / globalAction$: login</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Permettre d'ajouter un personnage dans une saga (utiliser le endpoint POST pr√©vu √† cet effet).</li>
                    <li class="fragment">Permettre de modifier un personnage dans une saga (utiliser le endpoint PUT pr√©vu √† cet effet).</li>
                </ul>
            </section>

            <section>
                <p>Middlewares</p>
                <aside class="notes">
                    <ul>
                        <li>Permet de faire de la chain logic (auth, security, cache, redirects, logging)</li>
                        <li>se d√©clare dans un `layout.tsx` ou `index.tsx` ou un `plugin.tsx`</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>Exemple</p>
                <div w3-include-html="./code/04-previous.html"></div>
            </section>
            <section>
                <p>Sp√©cifique √† une m√©thode</p>
                <div w3-include-html="./code/04-method.html"></div>
            </section>
            <section>
                <p>Ordre d'invocation</p>
                <div w3-include-html="./code/04-order.html"></div>
                <aside class="notes">
                    <ul>
                        <li>On prends tous les layouts dans l'ordre de descente dans l'arbre</li>
                        <li>On finit par l'index.tsx feuille de la route en question</li>
                        <li>Oui, on peut avoir des endpoints dans le index.tsx qui contient un composant. Les fonctions
                            seront appel√©es avant le rendreing
                        </li>
                        <li>Si plusieurs middlewares dans le m√™me fichier: onRequest, puis (onGet, onPost, onPut,
                            onPatch, et onDelete)
                        </li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>RequestEvent</p>
                <div w3-include-html="./code/04-request-event.html"></div>
                <aside class="notes">
                    <ul>
                        <li>RequestEvent contient toutes sortes de fonctions utilitaires</li>
                        <li>next => passe au prochain dans la cha√Æne</li>
                        <li>sharedMap => rend dispo des informations</li>
                        <li>headers, cookies, method, url, params, query => self-explain</li>
                        <li>text(), html(), json(), send(), exit(), redirect() => pour g√©rer le retour si besoin</li>
                        <li>il y en a tout un tas: https://qwik.dev/docs/middleware/#requestevent</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Logger tous les appels faits sur l'API</li>
                    <li class="fragment">Si tu t'ennuies: Rediriger si "non authentifi√©" sur certaines routes (pr√©senter un header "Authentication" suffit)
                    </li>
                </ul>
            </section>

            <section>
                <p>Endpoints</p>
                <div w3-include-html="./code/04-endpoints.html"></div>
                <aside class="notes">
                    <ul>
                        <li>C'est un middleware qui retourne une r√©ponse</li>
                        <li>Peut acc√©der √† une BDD pour retourner une liste, faire un reverse proxy etc...</li>
                    </ul>
                </aside>
            </section>
            <section>
                <p>R√©pondre progressivement</p>
                <div w3-include-html="./code/04-endpoints-p.html"></div>
                <aside class="notes">
                    <ul>
                        <li>C'est un middleware qui retourne une r√©ponse</li>
                        <li>Peut acc√©der √† une BDD pour retourner une liste, faire un reverse proxy etc...</li>
                    </ul>
                </aside>
            </section>

            <section>
                <p>server$</p>
                <div w3-include-html="./code/04-server.html"></div>
                <aside class="notes">
                    <ul>
                        <li>On peut aussi faire de la r√©ponse progressive avec server$ (mais avec des fonctions
                            asynchrone g√©n√©ratrices (async function*, yield, ...)
                        </li>
                        <li>Endpoint est plus bas niveau - plus utile pour √™tre une vraie API externe</li>
                        <li>server$ meilleur pour ex√©cuter du code et le renvoyer c√¥t√© client (fortement typ√© et
                            meilleure API pour faire √ßa
                        </li>
                        <li>seuls les middlewares issus de plugin.tsx sont ex√©cut√©s</li>
                    </ul>
                </aside>
            </section>

            <section>
                <p>R√©pondre progressivement...</p>
                <div w3-include-html="./code/04-server-p.html"></div>
            </section>

            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Retourner la liste des power rangers pour afficher sur une page</li>
                    <li class="fragment">Si tu t'ennuies: Le faire progressivement appara√Ætre toutes les 1s</li>
                </ul>
            </section>

            <section>
                <p>validator$ (server-side)</p>
                <div w3-include-html="./code/04-ss-validator.html"></div>
                <aside class="notes">
                    <ul>
                        <li>Permet de valider les entr√©es, headers, ...</li>
                        <li>Ex√©cut√©s du bas vers le haut</li>
                    </ul>
                </aside>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">Valider que toules champs du Power ranger soient bien renseign√©es</li>
                    <li class="fragment">(optionnel: et les couleurs dans une liste)</li>
                </ul>
            </section>
        </section>

        <section data-state="quiz">
            <section>
                <h2>Qwizz</h2>
            </section>
            <section data-quiz>
                <h3>Quel est le concept-cl√© de Qwik ?</h3>
                <p class="fragment green">La R√©sumabilit√©</p>
            </section>
            <section data-quiz>
                <h3>Quel est son pricipal avantage ?</h3>
                <p>Il est plus puissant</p>
                <p class="fragment highlight-green">Il est plus fain√©ant</p>
                <p class="fragment highlight-green">Il est plus intelligent</p>
                <aside class="notes">
                    Sa grande force r√©side dans toutes les choses qu'il √©vite de charger / d'ex√©cuter
                </aside>
            </section>
            <section data-quiz>
                <h3>Ce code est-il valide ?</h3>
                <div w3-include-html="./code/05-qwizz-1.html"></div>
                <p>Oui</p>
                <p class="fragment highlight-green">Non</p>
                <aside class="notes">
                    On ne peut pas s√©rialiser un BroadcastChannel
                </aside>
            </section>
            <section data-quiz>
                <h3>Ce code est-il valide ?</h3>
                <div w3-include-html="./code/05-qwizz-2.html"></div>
                <p class="fragment highlight-green">Oui</p>
                <p>Non</p>
                <p class="fragment green">
                    Mais ce n'est pas pertinent pour autant
                </p>
                <aside class="notes">
                    Alors le retour d'un setTimeout est un entier, donc techniquement s√©rializable.
                    Cependant, si on ex√©cute le setTimeout c√¥t√© server pour le transf√©rer c√¥t√© client...
                </aside>
            </section>
            <section data-quiz>
                <h3>Ce code est ex√©cut√© ?</h3>
                <div w3-include-html="./code/05-qwizz-4.html"></div>
                <p class="fragment highlight-green">C√¥t√© client</p>
                <p>C√¥t√© serveur</p>
                <p>Les 2</p>
                <aside class="notes">
                    Use on Document permet de d√©poser un listener sur document
                    Use Visible task attends sp√©cifiquement l'apparition du composant dans la vue
                    Exemples: setTimeout apr√®s affichage, ...
                </aside>
            </section>
            <section data-quiz>
                <h3>Ce code est ex√©cut√© ?</h3>
                <div w3-include-html="./code/05-qwizz-5.html"></div>
                <p>C√¥t√© client</p>
                <p class="fragment highlight-green">C√¥t√© serveur</p>
                <p>Les 2</p>
                <aside class="notes">
                    M√™me si on fait de la navigation c√¥t√© client, cette partie reste d√©port√©e sur le serveur
                </aside>
            </section>
            <section data-quiz>
                <h3>Ce code est ex√©cut√© ?</h3>
                <div w3-include-html="./code/05-qwizz-3.html"></div>
                <p>C√¥t√© client</p>
                <p>C√¥t√© serveur</p>
                <p class="fragment highlight-green">Les 2</p>
                <aside class="notes">
                    Use task est sp√©cifiquement d√©clench√© au rendeer du composant
                </aside>
            </section>
        </section>

        <section data-state="bonus">
            <section>
                <h2>Bonus stage</h2>
            </section>
            <section>
                <h2><a href="https://qwik.builder.io/docs/integrations/image-optimization/" target="_blank">Image
                    Optimisation</a></h2>
                <p class="fragment">Optimisation automatique et pouss√©e des images (featuring Vite)</p>
            </section>
            <section>
                <div w3-include-html="./code/06-image.html"></div>
                <aside class="notes">
                    <div>import de composant avec ?jsx √† la fin</div>
                    <div>Pas d'autres d√©clarations √† faire</div>
                </aside>
            </section>
            <section>
                <div w3-include-html="./code/06-image-compiled.html"></div>
                <aside class="notes">
                    <div>lazy load automatique</div>
                    <div>utilisation de srcset avec diff√©rentes tailles</div>
                    <div>images mises √† disposition automatiquement sous diff√©rentes r√©solution</div>
                </aside>
            </section>
            <section>
                <h2><a href="https://qwik.dev/docs/integrations/react/#qwik-react-%EF%B8%8F">Qwik-React</a></h2>
                <p class="fragment">Migrer depuis une application React sans tout r√©√©crire d√®s le d√©but</p>
            </section>
            <section>
                <div w3-include-html="./code/06-react.html"></div>
            </section>
            <section>
                <p>Existe aussi pour:</p>
                <ul>
                    <li class="fragment"><a href="https://github.com/QwikDev/qwik-angular">Angular</a></li>
                    <li class="fragment"><a href="https://github.com/mizchi/qwik-vue">Vue</a></li>
                </ul>
                <p class="fragment">Attention √† la maturit√©</p>
                <p class="fragment">Attention √† l'utilisabilit√© (instances de services, ...)</p>
            </section>
            <section>
                <h2><a href="https://qwik.dev/docs/integrations/#integrations">Integrations</a></h2>
                <p class="fragment">Power-ups</p>
            </section>
            <section>
                <ul>
                    <li><a href="https://qwik.dev/docs/integrations/authjs/">Auth.js</a> pour le backend</li>
                    <li><a href="https://qwik.dev/docs/integrations/i18n/">i18n ($localize ou qwik-speak)</a></li>
                    <li>Storybook, Tailwind, Leaflet...</li>
                </ul>
            </section>
            <section>
                <h2><a href="https://qwik.dev/docs/deployments/">Deployments</a></h2>
                <p class="fragment">Easy mode</p>
            </section>
            <section>
                <ul>
                    <li><a href="https://qwik.dev/docs/deployments/node/">Node</a></li>
                    <li>Google Cloud Run, Deno, Bun, AWS, Firebase, ...</li>
                    <li><a href="https://qwik.dev/docs/deployments/static/">Static Site</a></li>
                </ul>
            </section>
            <section data-state="tp">
                <p>TP</p>
                <ul>
                    <li class="fragment">D√©ployer votre application en mode Node.JS</li>
                    <li class="fragment">Compiler votre application en SSG</li>
                </ul>
            </section>
            <section>
                <h2><a href="https://qwik.dev/docs/integrations/partytown/#partytown">Partytown</a></h2>
                <p class="fragment">M√©canisme pour √©jecter les scripts tiers du temps de chargement de la page sans pour
                    autant les supprimer enti√®rement</p>
            </section>
            <section>
                <div w3-include-html="./code/06-partytown.html"></div>
            </section>
        </section>
    </div>
</div>


<script>
    function includeHTML() {
        var z, i, elmnt, file, xhttp;
        /* Loop through a collection of all HTML elements: */
        z = document.getElementsByTagName("*");
        for (i = 0; i < z.length; i++) {
            elmnt = z[i];
            /*search for elements with a certain atrribute:*/
            file = elmnt.getAttribute("w3-include-html");
            if (file) {
                /* Make an HTTP request using the attribute value as the file name: */
                xhttp = new XMLHttpRequest();
                xhttp.onreadystatechange = function () {
                    if (this.readyState == 4) {
                        if (this.status == 200) {
                            elmnt.innerHTML = this.responseText;
                        }
                        if (this.status == 404) {
                            elmnt.innerHTML = "Page not found.";
                        }
                        /* Remove the attribute, and call this function once more: */
                        elmnt.removeAttribute("w3-include-html");
                        includeHTML();
                    }
                }
                xhttp.open("GET", file, true);
                xhttp.send();
                /* Exit the function: */
                return;
            }
        }
    }

    includeHTML();
</script>
<script src="../dist/reveal.js"></script>
<script src="../plugin/notes/notes.js"></script>
<script src="../plugin/markdown/markdown.js"></script>
<script src="../plugin/highlight/highlight.js"></script>
<script type="module">
    import RevealGamepadController from "../plugin/reveal-gamepad-controller-plugin/dist/index.js";
    import RevealProgressImage from "../plugin/reveal-progress-image-plugin/dist/index.js";

    const urlParams = new URLSearchParams(window.location.search);
    const receiver = urlParams.get('receiver');
    const pluginOnlyOnMain = receiver !== null ? [] : [RevealGamepadController(Reveal)];

    const progressPlugin = RevealProgressImage(Reveal);

    setTimeout(() => {
        Reveal.initialize({
            hash: true,
            progress: true,
            progressImage: {
                iconSize: [60, 60],
                imageAnimation: progressPlugin.ANIMATIONS.CIRCULAR_FLY
            },
            imageSrc: './images/lightening.png',
            plugins: [RevealMarkdown, RevealHighlight, RevealNotes, ...pluginOnlyOnMain, progressPlugin],
        });
    }, 1000);
</script>
</body>
</html>

